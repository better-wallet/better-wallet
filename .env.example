# PostgreSQL Configuration
POSTGRES_DSN=postgres://user:pass@localhost:5432/bw?sslmode=disable

# Key Execution Backend: "kms" or "tee"
EXECUTION_BACKEND=kms

# KMS Backend Configuration
# The KMS backend uses a pluggable provider architecture, allowing self-hosted
# users to choose their preferred key management solution.
#
# Supported providers:
#   - "local"    : Local AES-GCM encryption with a master key (default, simple deployments)
#   - "aws-kms"  : AWS KMS - uses AWS SDK default credential chain
#   - "vault"    : HashiCorp Vault Transit engine
#
# Future providers:
#   - "gcp-kms"       : GCP Cloud KMS
#   - "azure-keyvault": Azure Key Vault
#
KMS_PROVIDER=local

# Local provider config (default)
KMS_LOCAL_MASTER_KEY=your-32-byte-master-key  # or use legacy KMS_KEY_ID

# AWS KMS provider config (when KMS_PROVIDER=aws-kms)
# Uses AWS SDK default credential chain: env vars (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY),
# shared config (~/.aws/credentials), IAM role, etc.
# KMS_AWS_KEY_ID=arn:aws:kms:us-east-1:123456789:key/your-key-id
# KMS_AWS_REGION=us-east-1

# HashiCorp Vault provider config (when KMS_PROVIDER=vault)
# Requires Transit secrets engine enabled: vault secrets enable transit
# Create encryption key: vault write -f transit/keys/wallet-encryption-key
# KMS_VAULT_ADDRESS=https://vault.example.com:8200
# KMS_VAULT_TOKEN=s.your-vault-token
# KMS_VAULT_TRANSIT_KEY=wallet-encryption-key

# TEE Backend Configuration
# The TEE backend uses a pluggable platform architecture, allowing self-hosted
# users to choose their preferred TEE provider.
#
# Supported platforms:
#   - "dev"        : Development mode using TCP (connects to localhost:TEE_VSOCK_PORT)
#   - "aws-nitro"  : AWS Nitro Enclave using vsock (Linux only)
#
# Future platforms:
#   - "azure-sgx"  : Azure SGX enclaves
#   - "gcp-confidential" : GCP Confidential VMs
#
# TEE_PLATFORM=dev                         # TEE platform (default: dev)
# TEE_VSOCK_PORT=5000                      # Enclave port (default: 5000)
# TEE_MASTER_KEY_HEX=your-32-byte-hex-key  # Master key for encrypting auth shares
# TEE_ATTESTATION_REQUIRED=false           # Require attestation verification
#
# For aws-nitro platform:
# TEE_VSOCK_CID=3                          # Enclave CID (assigned by Nitro, required)

# Server Configuration
PORT=8080
